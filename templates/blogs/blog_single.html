{% extends '_base.html' %}
{% block title %}
  blog - blog - details
{% endblock %}

{% block content %}
  <div class="row bg-light p-3">
    <div class="d-flex align-items-center">
      <h5 class="fw-bold">{{ blog.blog_title|capfirst }}</h5>
      <h6 class="tag ms-2 fw-bold">{{ blog.blog_category }}</h6>
    </div>

    <div class="col">
      <div class="card">
        <div class="card-title">
          <img src="{{ blog.blog_feature_image.url }}" alt="" class="img-fluid shadow-sm" style="width: 100%;height: 400px;object-fit: cover;object-position: center; border-radius: 5px;" />
        </div>
        <div class="card-body pt-0">
          <h6><a href="" class="nav-link">{{ blog.blog_title }}</a></h6>
          <p class="text-muted my-0">
            Writing By: <b>{{ blog.blog_author.username }}</b>
          </p>
          <small class="text-muted">Created at :{{ blog.created_at|timesince }}</small>
          <hr class="my-1 border-3 border-primary" style="width: 60px;" />
          <small class="text-muted"><b>Description :</b></small>
          <p class="text-muted">{{ blog.blog_short_description }}</p>
          <p class="text-muted">{{ blog.blog_long_description }}</p>
        </div>
      </div>
    </div>
  </div>
  <hr class="my-1 border-4 border-primary" style="width: 100%;" />
  <div class="row bg-light p-3">
    <div class="col">
      <div class="card">
        <div class="d-flex align-items-center">
          <h5 class="fw-bold">Comments</h5>
          <h6 class="ms-2 fw-bold">
            {% if comments_count %}(<span class="tag">{{comments_count.count}}</span>){% else %}(<span class="tag">0</span>){% endif %}</h6>
        </div>
        <hr class="my-1 border-4 border-primary" style="width: 110px;" />
        <div class="card-body">
          
          {% for comment in comments_count %}
           <h6 class="text-capitalize fw-bold my-0 txt-primary"><small class="text-muted">Comment By : </small>{{comment.user.username}}</h6>
           <h6 class="text-muted text-capitalize fw-bold txt-primary" ><small class="text-muted">Date of Comment : </small>{{comment.created_at | timesince}}</h6>
            <p class="text-muted px-4">{{comment.body}}</p>
          {% endfor %}
            
        </div>
      </div>
    </div>
  </div>
  <hr class="my-1 border-4 border-primary" style="width: 100%;" />
  {% if request.user.is_authenticated %}
    <div class="row bg-light p-3">
      <div class="col">
        <div class="card">
          <div class="d-flex align-items-center">
            <h5 class="fw-bold">Write Comments</h5>
          </div>
          <div class="card-body">
            <form action="{% url 'blogs:write_comment' blog.blog_slug %}" method="post">
              {% csrf_token %}
              <textarea name="comment" id="" class="form-control" rows="10"></textarea>
              <input type="submit" value="Submit" class="btn btn-primary px-3 py-1 my-2" />
            </form>
          </div>
        </div>
      </div>
    </div>
  {% else %}
    <div class="row bg-light p-3">
      <div class="col">
        <div class="card">
          <div class="d-flex align-items-center">
            <h5 class="fw-bold">To Write a Comments You Should be </h5>
            <h5 class="fw-bold mx-3"><a href="{% url 'users:login' %}" class="nav-link">Login Now</a></h5>
          </div>
        </div>
      </div>
    </div>
  {% endif %}
  
{% endblock %}

